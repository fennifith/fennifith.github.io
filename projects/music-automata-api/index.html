<!DOCTYPE html>

<html lang="en">
<head>
    <meta charset="utf-8">










<meta name="description" content="An Rx-based interface for programming musical automata in JavaScript. (WIP)">
<meta name="author" content="James Fenn">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
<meta name="generator" content="James Fenn">
<title>Music Automata api</title>

<meta name="theme-color" content="#FFFFFF">
<meta name="mobile-web-app-capable" content="yes">
<link rel="manifest" href="/manifest.json">

<meta name="application-name" content="James Fenn">
<meta name="msapplication-TileColor" content="#FFFFFF">
<meta name="msapplication-tooltip" content="Writer of bad puns and slightly better software. This website contains information about my adventures in programming, current projects, and me.">
<meta name="msapplication-config" content="/ieconfig.xml">

<link rel="shortcut icon" href="/favicon.ico">
<link rel="icon" sizes="16x16" href="/favicon.ico">
<link rel="icon" sizes="24x24" href="/images/favicon-24.ico">
<link rel="icon" sizes="32x32" href="/images/favicon-32.ico">
<link rel="icon" sizes="48x48" href="/images/favicon-48.ico">
<link rel="icon" sizes="64x64" href="/images/favicon-64.ico">

<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="white">
<meta name="apple-mobile-web-app-title" content="James Fenn">
<link rel="apple-touch-icon-precomposed" href="/images/favicon-152.png">

<link href="https://fonts.googleapis.com/css?family=Miriam+Libre|Roboto|Vollkorn" rel="stylesheet">
<link href="//fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<link href="/css/styles.css" rel="stylesheet">


<meta name="twitter:card" content="summary">



<meta name="twitter:creator" content="@fennifith">
<meta name="twitter:site" content="@fennifith">

<meta name="twitter:title" content="Music Automata api">
<meta name="twitter:description" content="An Rx-based interface for programming musical automata in JavaScript. (WIP)">
<meta name="twitter:image" content="https://jfenn.me/images/me.jpg">

<meta name="og:title" content="Music Automata api">

<meta name="og:type" content="website">

<meta name="og:image" content="https://jfenn.me/images/headers/snowytrees.jpg">
<meta name="og:url" content="https://jfenn.me/projects/music-automata-api/">
<meta name="og:description" content="An Rx-based interface for programming musical automata in JavaScript. (WIP)">
<meta name="og:locale" content="en_US">
<meta name="og:site_name" content="James Fenn">



    
        <link href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.4.0/styles/atelier-cave-dark.min.css" rel="stylesheet">
<link href="/css/highlight.css" rel="stylesheet">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/highlight.min.js"></script>

<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/languages/javascript.min.js"></script>

<script>hljs.initHighlightingOnLoad();</script>

    
</head>
<body class="sidebar__container">
	<black-lives></black-lives><br>
<script src="https://unpkg.com/i-stand/black-lives.js" type="module"></script>


    <sidebar class="sidebar">
        <h2>Links</h2>
        
        <a class="link" href="https://github.com/fennifith/music-automata-api">
            <object class="link__img" data="https://github.com/favicon.ico" type="image/png">
                <img class="link__img" src="/images/ic/link.svg">
            </object>
            <span class="link__title">GitHub</span>
        </a>
        
        <a class="link" href="https://github.com/fennifith/music-automata-api/issues">
            <object class="link__img" data="/images/ic/bug.svg" type="image/png">
                <img class="link__img" src="/images/ic/link.svg">
            </object>
            <span class="link__title">Issues</span>
        </a>
        
        <h2>Contributors</h2>
        
        <a class="link" href="https://github.com/fennifith">
            <object class="link__img--round" data="https://avatars1.githubusercontent.com/u/13000407?v=4" type="image/png">
                <img class="link__img--round" src="/images/ic/person.svg">
            </object>
            <span class="link__title">fennifith</span>
        </a>
        
        
        
        <h2>Contact</h2>
        
        <a class="link" href="https://discord.jfenn.me/">
            <i class="link__img material-icons">group</i>
            <span class="link__title">Discord</span>
        </a>
        
        <a class="link" href="/links/telegram">
            <i class="link__img material-icons">chat</i>
            <span class="link__title">Telegram</span>
        </a>
        
        <a class="link" href="mailto:me@jfenn.me">
            <i class="link__img material-icons">email</i>
            <span class="link__title">E-mail</span>
        </a>
        
        <br><br>
        <div class="--desktop">
            
        </div>
    </sidebar>

    <main class="container">
        <a class="link" href="/#projects">
            <img class="link__img" src="/images/ic/back.svg">
            <span class="link__title">All Projects</span>
        </a>
        <br>

        

        <div class="h-entry">
			
            <div id="content" class="e-content markdown">
                <p>The goal of this project is to create an API that can be used to schedule and
organize automated music generation using <a href="http://reactivex.io/">ReactiveX</a>
and the observable pattern.</p>

<h2 id="inspiration">Inspiration</h2>

<p>This was mainly inspired by the work of <a href="https://www.youtube.com/channel/UCznARY34-PH2Yv4jFxj3SUA">Lars Dietrich</a>.
I can only speculate as to how it was put together, but (with the exception of
<a href="https://www.youtube.com/watch?v=t3zha5WAY3w">Titan</a>) a large amount of it does
appear to be scripted, and most of the work seems to have been put into the
visualization rather than automating the music itself. Which is perfectly fine.</p>

<p><a href="https://decompositiontheory.info/">65 Days of Static</a> is also doing work that
is perhaps closer to what this project hopes to accomplish.
<a href="https://www.youtube.com/watch?v=oW_lK9yWsCA">This video</a> shows a lot of what
they have achieved, and <a href="https://twitter.com/65dos/status/1115956359470690305">many</a>
<a href="https://twitter.com/65dos/status/1115258013059821570">of</a>
<a href="https://twitter.com/65dos/status/1115583157913493504">their</a>
<a href="https://twitter.com/65dos/status/1114917016438226945">tweets</a>
show this in practical use.</p>

<p>Some of the actual music generation strategies are based on
<a href="https://www.ibm.com/developerworks/library/j-camusic/index.html">this article</a>
by Paul D. Reiners about the relationship between cellular automata and music.</p>

<h2 id="design">Design</h2>

<p>To gain some insight into how this can be used, think of music generation as a
series of mutations upon an existing set of data. For example, a random integer
value could be transformed into a chord, and made to conform to a specific beat
pattern before then being passed to an instrument to play. While it may be
common to do so, these are not mutations that need to happen at the exact time
that the note is played, and should happen independently.</p>

<p>In this API, something that can accept or output a note is referred to as a
“Block”. Blocks are notified when a note is sent to them, and have the ability
to modify the note, remove it, or create new notes before passing them along.
Together, the blocks build a sort of tree structure along which notes are
passed. For example, consider a set of blocks that are organized like below:</p>

<pre><code class="language-nohighlight">       [keyboard]
        /      \
    [piano]  [arpeggiator]
                 \
                [synth]
</code></pre>

<p>Here, all notes are created from keyboard input. They are then passed directly
to the blocks “piano” and “arpeggiator”. The “piano” block simply plays the
notes it receives. The “arpeggiator” mutates them - into an arpeggio - and
passes the result of that mutation to the “synth” block which, again, plays
them.</p>

<p>Using this API, here is an example of what such a structure might look like:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">let</span> <span class="nx">synth</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Block</span><span class="p">()</span>
    <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">noteStart</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">note</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">audioApi</span><span class="p">.</span><span class="nx">playMidiNote</span><span class="p">(</span><span class="nx">note</span><span class="p">.</span><span class="nx">midi</span><span class="p">,</span> <span class="nx">synthInstrument</span><span class="p">);</span>
    <span class="p">});</span>

<span class="kd">let</span> <span class="nx">arpeggiator</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Block</span><span class="p">()</span>
    <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">note</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">note</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">arpeggiator</span><span class="p">.</span><span class="nx">forward</span><span class="p">(</span><span class="nx">note</span><span class="p">);</span>
        <span class="nx">arpeggiator</span><span class="p">.</span><span class="nx">forward</span><span class="p">(</span><span class="nx">note</span><span class="p">.</span><span class="nx">mutate</span><span class="p">({</span> <span class="na">midi</span><span class="p">:</span> <span class="nx">note</span><span class="p">.</span><span class="nx">midi</span> <span class="o">+</span> <span class="mi">4</span> <span class="p">}));</span>
        <span class="nx">arpeggiator</span><span class="p">.</span><span class="nx">forward</span><span class="p">(</span><span class="nx">note</span><span class="p">.</span><span class="nx">mutate</span><span class="p">({</span> <span class="na">midi</span><span class="p">:</span> <span class="nx">note</span><span class="p">.</span><span class="nx">midi</span> <span class="o">+</span> <span class="mi">7</span> <span class="p">}));</span>
    <span class="p">})</span>
    <span class="p">.</span><span class="nx">to</span><span class="p">(</span><span class="nx">synth</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">piano</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Block</span><span class="p">()</span>
    <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">noteStart</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">note</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">audioApi</span><span class="p">.</span><span class="nx">playMidiNote</span><span class="p">(</span><span class="nx">note</span><span class="p">.</span><span class="nx">midi</span><span class="p">,</span> <span class="nx">pianoInstrument</span><span class="p">);</span>
    <span class="p">});</span>

<span class="kd">let</span> <span class="nx">keyboard</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Block</span><span class="p">()</span>
    <span class="p">.</span><span class="nx">to</span><span class="p">(</span><span class="nx">piano</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">to</span><span class="p">(</span><span class="nx">arpeggiator</span><span class="p">);</span>
</code></pre></div></div>

            </div>
            <h4>
                Last updated: <a class="u-url" href="https://jfenn.me/projects/music-automata-api/">
                <time class="dt-published dt-updated" datetime="2020-07-17T05:58:53Z">July 17, 2020</time></a>
            </h4>
        </div>
    </main>
    
    <footer class="footer container" style="padding-bottom: 96px;">
	<hr>

	<div style="display: inline-block; float: right;">
		<input id="darkThemeCheckBox" type="checkbox">
		<label for="darkThemeCheckBox"></label>
		<span>Dark Theme</span>
	</div>
	<script type="text/javascript">
	    const _darkThemeCheckBoxElement = document.getElementById("darkThemeCheckBox");
	    const _darkThemeListeners = [];
	    var _darkTheme = false;
	    
	    function setDarkTheme(isDark) {
	        _darkTheme = isDark;
	        _darkThemeCheckBoxElement.checked = isDark;
			if (isDark) {
				document.body.classList.remove("--theme-light");
				document.body.classList.add("--theme-dark");
			} else {
				document.body.classList.remove("--theme-dark");
				document.body.classList.add("--theme-light");
			}
			
	        let color = isDark ? "#212121" : "#FFFFFF";
	        document.querySelector("meta[name='theme-color']").setAttribute("content", color);

			if (localStorage) {
				if (isDark)
					localStorage.setItem("darkTheme", ".");
				else localStorage.removeItem("darkTheme");
			}

			for (let i in _darkThemeListeners) {
			    _darkThemeListeners[i](isDark);
			}
	    }

	    function addDarkThemeListener(listener) {
	        _darkThemeListeners.push(listener);
	        listener(_darkTheme);
	    }
	    
		_darkThemeCheckBoxElement.addEventListener("change", function() {
			setDarkTheme(_darkThemeCheckBoxElement.checked);
		});

		setDarkTheme(localStorage && localStorage.getItem("darkTheme"));
	</script>
	
	<a class="footer__link" href="/redirects/?t=github&d=${}.github.io" target="_blank">Website Source Code</a>
	<br>
	<a class="footer__link" href="/policies/?web" target="_blank">Privacy Policy</a>
	<br>
	<a class="footer__link" href="/licenses" target="_blank">Open Source Licenses</a>
</footer>

<script src="//instant.page/3.0.0" type="module" defer integrity="sha384-OeDn4XE77tdHo8pGtE1apMPmAipjoxUQ++eeJa6EtJCfHlvijigWiJpD7VDPWXV1"></script>

    <script async defer src="https://buttons.github.io/buttons.js"></script>
</body>
</html>