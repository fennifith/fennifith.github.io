<!DOCTYPE html>

<html lang="en">
<head>
    <meta charset="utf-8">










<meta name="description" content="A library to allow easy implementation of pre-Oreo adaptive icon support in Android launchers.">
<meta name="author" content="James Fenn">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
<meta name="generator" content="James Fenn">
<title>Adaptive Icon View</title>

<meta name="theme-color" content="#FFFFFF">
<meta name="mobile-web-app-capable" content="yes">
<link rel="manifest" href="/manifest.json">

<meta name="application-name" content="James Fenn">
<meta name="msapplication-TileColor" content="#FFFFFF">
<meta name="msapplication-tooltip" content="Writer of bad puns and slightly better software. This website contains information about my adventures in programming, current projects, and me.">
<meta name="msapplication-config" content="/ieconfig.xml">

<link rel="shortcut icon" href="/favicon.ico">
<link rel="icon" sizes="16x16" href="/favicon.ico">
<link rel="icon" sizes="24x24" href="/images/favicon-24.ico">
<link rel="icon" sizes="32x32" href="/images/favicon-32.ico">
<link rel="icon" sizes="48x48" href="/images/favicon-48.ico">
<link rel="icon" sizes="64x64" href="/images/favicon-64.ico">

<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="white">
<meta name="apple-mobile-web-app-title" content="James Fenn">
<link rel="apple-touch-icon-precomposed" href="/images/favicon-152.png">

<link href="https://fonts.googleapis.com/css?family=Miriam+Libre|Roboto|Vollkorn" rel="stylesheet">
<link href="//fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<link href="/css/styles.css" rel="stylesheet">


<meta name="twitter:card" content="summary">



<meta name="twitter:creator" content="@fennifith">
<meta name="twitter:site" content="@fennifith">

<meta name="twitter:title" content="Adaptive Icon View">
<meta name="twitter:description" content="A library to allow easy implementation of pre-Oreo adaptive icon support in Android launchers.">
<meta name="twitter:image" content="https://jfenn.me/images/me.jpg">

<meta name="og:title" content="Adaptive Icon View">

<meta name="og:type" content="website">

<meta name="og:image" content="https://jfenn.me/images/headers/snowytrees.jpg">
<meta name="og:url" content="https://jfenn.me/projects/adaptiveiconview/">
<meta name="og:description" content="A library to allow easy implementation of pre-Oreo adaptive icon support in Android launchers.">
<meta name="og:locale" content="en_US">
<meta name="og:site_name" content="James Fenn">



    
        <link href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.4.0/styles/atelier-cave-dark.min.css" rel="stylesheet">
<link href="/css/highlight.css" rel="stylesheet">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/highlight.min.js"></script>

<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/languages/java.min.js"></script>

<script>hljs.initHighlightingOnLoad();</script>

    
</head>
<body class="sidebar__container">
	<black-lives></black-lives><br>
<script src="https://unpkg.com/i-stand/black-lives.js" type="module"></script>


    <sidebar class="sidebar">
        <h2>Links</h2>
        
        <a class="link" href="https://github.com/fennifith/AdaptiveIconView">
            <object class="link__img" data="https://github.com/favicon.ico" type="image/png">
                <img class="link__img" src="/images/ic/link.svg">
            </object>
            <span class="link__title">GitHub</span>
        </a>
        
        <a class="link" href="https://github.com/fennifith/AdaptiveIconView/issues">
            <object class="link__img" data="/images/ic/bug.svg" type="image/png">
                <img class="link__img" src="/images/ic/link.svg">
            </object>
            <span class="link__title">Issues</span>
        </a>
        
        <a class="link" href="https://choosealicense.com/licenses/apache-2.0/">
            <object class="link__img" data="/images/ic/copyright.svg" type="image/png">
                <img class="link__img" src="/images/ic/link.svg">
            </object>
            <span class="link__title">Apache License 2.0</span>
        </a>
        
        <a class="link" href="https://jitpack.io/#me.jfenn/AdaptiveIconView">
            <object class="link__img" data="/images/ic/launch.svg" type="image/png">
                <img class="link__img" src="/images/ic/link.svg">
            </object>
            <span class="link__title">JitPack</span>
        </a>
        
        <a class="link" href="https://github.com/fennifith/AdaptiveIconView/releases/download/v0.0.1/AdaptiveIconView.apk">
            <object class="link__img" data="/images/ic/download.svg" type="image/png">
                <img class="link__img" src="/images/ic/link.svg">
            </object>
            <span class="link__title">AdaptiveIconView.apk (v0.0.1 stable)</span>
        </a>
        
        <h2>Contributors</h2>
        
        <a class="link" href="https://github.com/fennifith">
            <object class="link__img--round" data="https://avatars1.githubusercontent.com/u/13000407?v=4" type="image/png">
                <img class="link__img--round" src="/images/ic/person.svg">
            </object>
            <span class="link__title">fennifith</span>
        </a>
        
        
        
        <h2>Contact</h2>
        
        <a class="link" href="https://discord.jfenn.me/">
            <i class="link__img material-icons">group</i>
            <span class="link__title">Discord</span>
        </a>
        
        <a class="link" href="/links/telegram">
            <i class="link__img material-icons">chat</i>
            <span class="link__title">Telegram</span>
        </a>
        
        <a class="link" href="mailto:me@jfenn.me">
            <i class="link__img material-icons">email</i>
            <span class="link__title">E-mail</span>
        </a>
        
        <br><br>
        <div class="--desktop">
            
        </div>
    </sidebar>

    <main class="container">
        <a class="link" href="/#projects">
            <img class="link__img" src="/images/ic/back.svg">
            <span class="link__title">All Projects</span>
        </a>
        <br>

        
        <nav class="nav">
            <button class="nav__item" selected>
                <i class="nav__item__icon material-icons">info</i>
                <span class="nav__item__title">About</span>
            </button>
            
            
            <button class="nav__item" onclick="location.href='docs/';">
                <i class="nav__item__icon material-icons">list_alt</i>
                <span class="nav__item__title">Docs</span>
            </button>
            
        </nav>
        <br>
        

        <div class="h-entry">
			
            <div id="content" class="e-content markdown">
                <p>AdaptiveIconView is a library built to allow an easy implementation of pre-Oreo adaptive icon support in Android launchers. Special thanks to <a href="https://github.com/LawnchairLauncher/Lawnchair">Lawnchair</a> and its developers for providing the method used to access -v26 assets on pre-Oreo devices.</p>

<p>For demonstration purposes, sample APKs can be downloaded <a href="https://github.com/fennifith/AdaptiveIconView/blob/master/../../releases">here</a>.</p>

<p><a href="https://jitpack.io/#me.jfenn/AdaptiveIconView"><img src="https://jitpack.io/v/me.jfenn/AdaptiveIconView.svg" alt="" /></a>
<a href="https://travis-ci.com/fennifith/AdaptiveIconView"><img src="https://travis-ci.com/fennifith/AdaptiveIconView.svg" alt="Build Status" /></a>
<a href="https://discord.gg/sVtzgbr"><img src="https://img.shields.io/discord/514625116706177035.svg?logo=discord&amp;colorB=7289da" alt="Discord" /></a></p>

<h2 id="screenshots">Screenshots</h2>

<table>
  <thead>
    <tr>
      <th>Circles</th>
      <th>Squircles</th>
      <th>Teardrops</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><img src="https://github.com/fennifith/AdaptiveIconView/blob/master/./.github/images/circle.png?raw=true" alt="img" /></td>
      <td><img src="https://github.com/fennifith/AdaptiveIconView/blob/master/./.github/images/squircle.png?raw=true" alt="img" /></td>
      <td><img src="https://github.com/fennifith/AdaptiveIconView/blob/master/./.github/images/teardrop.png?raw=true" alt="img" /></td>
    </tr>
  </tbody>
</table>

<h2 id="usage">Usage</h2>

<h3 id="setup">Setup</h3>

<p>This project is published on <a href="https://jitpack.io/">JitPack</a>, which you can add to your project by copying the following to your root build.gradle at the end of “repositories”.</p>

<div class="language-gradle highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">allprojects</span> <span class="o">{</span>
  <span class="k">repositories</span> <span class="o">{</span>
    <span class="o">...</span>
    <span class="n">maven</span> <span class="o">{</span> <span class="n">url</span> <span class="s1">'https://jitpack.io'</span> <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>To add the dependency, copy this line into your app module’s build.gradle file.</p>

<div class="language-gradle highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">compile</span> <span class="s1">'me.jfenn:AdaptiveIconView:0.0.1'</span>
</code></pre></div></div>

<h5 id="support-libraries">Support Libraries</h5>

<p>The Android support libraries have been refactored from <code class="language-plaintext highlighter-rouge">android.support.*</code> to <code class="language-plaintext highlighter-rouge">androidx.*</code> as detailed <a href="https://developer.android.com/topic/libraries/support-library/androidx-overview">here</a>. As such, AdaptiveIconView only uses the new dependencies. If your project still uses the older support libraries for some reason, you must compile your own version of the library (either refactoring it yourself or using a version from before the change).</p>

<h3 id="loading-an-icon">Loading an Icon</h3>

<p>The <a href="https://github.com/fennifith/AdaptiveIconView/blob/master/./library/src/main/java/james/adaptiveicon/AdaptiveIcon.java"><code class="language-plaintext highlighter-rouge">AdaptiveIcon</code></a> class contains multiple ways to load and store the assets required to pass to an <a href="https://github.com/fennifith/AdaptiveIconView/blob/master/./library/src/main/java/james/adaptiveicon/AdaptiveIconView.java"><code class="language-plaintext highlighter-rouge">AdaptiveIconView</code></a>. Most methods involve the <code class="language-plaintext highlighter-rouge">AdaptiveIcon.Loader</code> subclass, which contains many customization options and several ‘fallback’ classes for applications passed that do not have an adaptive icon.</p>

<h4 id="method-1-simple-easy-and-just-about-the-worst-thing-that-you-could-possibly-do">Method 1: Simple, Easy, and Just About The Worst Thing That You Could Possibly Do</h4>

<p>This method will create an asynchronous thread to load the icon for you, but you will need to properly manage it yourself to prevent memory leaks. Unless you don’t care about memory leaks and just want to quickly implement something that works, in which case this is perfect for you. Coincidentally, this is the loading method that is used in the sample application.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">new</span> <span class="nc">AdaptiveIcon</span><span class="o">.</span><span class="na">Loader</span><span class="o">()</span>
  <span class="o">.</span><span class="na">with</span><span class="o">(</span><span class="k">this</span><span class="o">)</span> <span class="c1">//always pass a context before calling any other methods</span>
  <span class="o">.</span><span class="na">fallback</span><span class="o">(</span><span class="k">new</span> <span class="nc">AdaptiveIcon</span><span class="o">.</span><span class="na">Loader</span><span class="o">.</span><span class="na">LegacyIconFallback</span><span class="o">())</span> <span class="c1">//(optional) specify a fallback to use if there is no adaptive icon or if it is inaccessible to the app</span>
  <span class="o">.</span><span class="na">loadAsync</span><span class="o">(</span><span class="n">resolveInfo</span><span class="o">,</span> <span class="k">new</span> <span class="nc">AdaptiveIcon</span><span class="o">.</span><span class="na">Loader</span><span class="o">.</span><span class="na">AsyncCallback</span><span class="o">()</span> <span class="o">{</span> <span class="c1">//specify a ResolveInfo of the app to load the icon of</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onResult</span><span class="o">(</span><span class="nc">ResolveInfo</span> <span class="n">info</span><span class="o">,</span> <span class="nc">AdaptiveIcon</span> <span class="n">icon</span><span class="o">)</span> <span class="o">{</span>
      <span class="c1">//pass the loaded icon to an AdaptiveIconView</span>
    <span class="o">}</span>
  <span class="o">});</span>
</code></pre></div></div>

<p>However, if you actually care about your end users at all, it would be far better to use the <code class="language-plaintext highlighter-rouge">load(ResolveInfo)</code> method instead of <code class="language-plaintext highlighter-rouge">loadAsync</code> and handle the multithreading spaghetti yourself. Please also note that, while it may not make a huge impact on performance, you can call <code class="language-plaintext highlighter-rouge">load</code> multiple times on the same <code class="language-plaintext highlighter-rouge">Loader</code> with different <code class="language-plaintext highlighter-rouge">ResolveInfo</code>s instead of creating a new <code class="language-plaintext highlighter-rouge">Loader</code> for every single icon that you need to load.</p>

<h4 id="method-2-do-it-all-yourself">Method 2: Do It All Yourself</h4>

<p>Ignoring the variety of different loading and fallback methods, all that the <code class="language-plaintext highlighter-rouge">AdaptiveIcon</code> class really does is store drawables, bitmaps, and a scale for the adaptive icon. With this in mind, you can easily create one yourself.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">AdaptiveIcon</span> <span class="n">icon</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">AdaptiveIcon</span><span class="o">(</span><span class="n">foregroundDrawable</span><span class="o">,</span> <span class="n">backgroundDrawable</span><span class="o">,</span> <span class="mf">1.0</span><span class="o">);</span>
</code></pre></div></div>

<p>One thing to keep in mind here is that the scale (the third parameter passed to the constructor), for some bizarre reason, is actually reversed. Smaller numbers will make the icon larger, and larger numbers will make it smaller. Keep in mind that the scale does not affect the size of the shape of the icon, only what is displayed inside of it.</p>

<h3 id="creating-a-view">Creating a View</h3>

<p>The <a href="https://github.com/fennifith/AdaptiveIconView/blob/master/./library/src/main/java/james/adaptiveicon/AdaptiveIconView.java">AdaptiveIconView</a> class should be pretty simple to use. The <code class="language-plaintext highlighter-rouge">setIcon</code> and <code class="language-plaintext highlighter-rouge">getIcon</code> methods set and get the <code class="language-plaintext highlighter-rouge">AdaptiveIcon</code> class it uses, updating the view automatically. <code class="language-plaintext highlighter-rouge">setPath(Rect, Path)</code>, or <code class="language-plaintext highlighter-rouge">setPath(String)</code> (which accepts a path string within a 100x100 rect) can be used to specify a shape for the icon to clip to, but you may find it easier to use <code class="language-plaintext highlighter-rouge">setPath(int pathType)</code> instead (provided types are <code class="language-plaintext highlighter-rouge">PATH_CIRCLE</code>, <code class="language-plaintext highlighter-rouge">PATH_SQUIRCLE</code>, <code class="language-plaintext highlighter-rouge">PATH_ROUNDED_SQUARE</code>, <code class="language-plaintext highlighter-rouge">PATH_SQUARE</code>, and the infamous <code class="language-plaintext highlighter-rouge">PATH_TEARDROP</code>). <code class="language-plaintext highlighter-rouge">setOffset(x, y)</code> can be used to quickly offset the drawables inside the icon for fancy movement animations.</p>

<p>By default, the view will set its own touch listener to animate the icon scale when it is clicked. This can be disabled by setting another touch listener (or just passing null). There are currently no methods to scale the icon yourself, but they should be added soon.</p>

<h3 id="more-fallback-options">More Fallback Options</h3>

<p>In Method 1, the <code class="language-plaintext highlighter-rouge">LegacyIconFallback</code> is used to tell the loader to create an <code class="language-plaintext highlighter-rouge">AdaptiveIcon</code> using the legacy icon if there is no adaptive icon for the specified <code class="language-plaintext highlighter-rouge">ResolveInfo</code>. In addition to this, fallbacks can be chained together - you can create another fallback as a fallback for another fallback that is the fallback for the original loader - and there are many more options that have not yet been covered. Instead of going over all of the options in detail, I will just create a table for each of the fallbacks with short descriptions of each.</p>

<h4 id="fallback-abstract-class">Fallback (abstract class)</h4>

<table>
  <thead>
    <tr>
      <th>Method Name</th>
      <th>Parameters</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>withFallback</td>
      <td>Fallback</td>
      <td>Sets a fallback to use if there is no icon for this fallback.</td>
    </tr>
    <tr>
      <td>getFallback</td>
      <td> </td>
      <td>Returns the current fallback, or null if there isn’t one.</td>
    </tr>
    <tr>
      <td>load</td>
      <td>Context, ResolveInfo</td>
      <td>Loads the icon for this fallback, or this fallback’s fallback if it fails.</td>
    </tr>
  </tbody>
</table>

<h4 id="legacyiconfallback">LegacyIconFallback</h4>

<table>
  <thead>
    <tr>
      <th>Method Name</th>
      <th>Parameters</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>withBackgroundColor</td>
      <td>@ColorInt int</td>
      <td>Sets the background to a new ColorDrawable of the passed color int (defaults to the dominant color of the legacy icon).</td>
    </tr>
    <tr>
      <td>withBackground</td>
      <td>Drawable</td>
      <td>Sets the background to the passed Drawable.</td>
    </tr>
    <tr>
      <td>shouldClip</td>
      <td>@Nullable Boolean</td>
      <td>Whether legacy icons should be clipped by the shape, or null (the default value) to determine automatically.</td>
    </tr>
    <tr>
      <td>withScale</td>
      <td>@Nullable Double</td>
      <td>Specify a custom scale for legacy icons, or null (default) to determine automatically.</td>
    </tr>
    <tr>
      <td>shouldRemoveShadow</td>
      <td>boolean</td>
      <td>Whether the shadow and other transparent parts should be removed from the icon - may sometimes result in choppy edges (defaults to false).</td>
    </tr>
  </tbody>
</table>

<h4 id="roundiconfallback">RoundIconFallback</h4>

<table>
  <thead>
    <tr>
      <th>Method Name</th>
      <th>Parameters</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>withBackgroundColor</td>
      <td>@ColorInt int</td>
      <td>Sets the background to a new ColorDrawable of the passed color int (defaults to the dominant color of the round icon).</td>
    </tr>
    <tr>
      <td>withBackground</td>
      <td>Drawable</td>
      <td>Sets the background to the passed Drawable.</td>
    </tr>
    <tr>
      <td>withScale</td>
      <td>@Nullable Double</td>
      <td>Specify a custom scale for round icons, or null (default) to determine automatically.</td>
    </tr>
    <tr>
      <td>shouldRemoveShadow</td>
      <td>boolean</td>
      <td>Whether the shadow and other transparent parts should be removed from the icon - may sometimes result in choppy edges (defaults to false).</td>
    </tr>
  </tbody>
</table>

<h4 id="iconpackfallback">IconPackFallback</h4>

<p>This fallback has not yet been created (see <a href="../../issues/1">issue #1</a>), but will allow you to pass the package name of an icon pack for the loader to use.</p>

            </div>
            <h4>
                Last updated: <a class="u-url" href="https://jfenn.me/projects/adaptiveiconview/">
                <time class="dt-published dt-updated" datetime="2019-08-06T19:58:30Z">August  6, 2019</time></a>
            </h4>
        </div>
    </main>
    
    <footer class="footer container" style="padding-bottom: 96px;">
	<hr>

	<div style="display: inline-block; float: right;">
		<input id="darkThemeCheckBox" type="checkbox">
		<label for="darkThemeCheckBox"></label>
		<span>Dark Theme</span>
	</div>
	<script type="text/javascript">
	    const _darkThemeCheckBoxElement = document.getElementById("darkThemeCheckBox");
	    const _darkThemeListeners = [];
	    var _darkTheme = false;
	    
	    function setDarkTheme(isDark) {
	        _darkTheme = isDark;
	        _darkThemeCheckBoxElement.checked = isDark;
			if (isDark) {
				document.body.classList.remove("--theme-light");
				document.body.classList.add("--theme-dark");
			} else {
				document.body.classList.remove("--theme-dark");
				document.body.classList.add("--theme-light");
			}
			
	        let color = isDark ? "#212121" : "#FFFFFF";
	        document.querySelector("meta[name='theme-color']").setAttribute("content", color);

			if (localStorage) {
				if (isDark)
					localStorage.setItem("darkTheme", ".");
				else localStorage.removeItem("darkTheme");
			}

			for (let i in _darkThemeListeners) {
			    _darkThemeListeners[i](isDark);
			}
	    }

	    function addDarkThemeListener(listener) {
	        _darkThemeListeners.push(listener);
	        listener(_darkTheme);
	    }
	    
		_darkThemeCheckBoxElement.addEventListener("change", function() {
			setDarkTheme(_darkThemeCheckBoxElement.checked);
		});

		setDarkTheme(localStorage && localStorage.getItem("darkTheme"));
	</script>
	
	<a class="footer__link" href="/redirects/?t=github&d=${}.github.io" target="_blank">Website Source Code</a>
	<br>
	<a class="footer__link" href="/policies/?web" target="_blank">Privacy Policy</a>
	<br>
	<a class="footer__link" href="/licenses" target="_blank">Open Source Licenses</a>
</footer>

<script src="//instant.page/3.0.0" type="module" defer integrity="sha384-OeDn4XE77tdHo8pGtE1apMPmAipjoxUQ++eeJa6EtJCfHlvijigWiJpD7VDPWXV1"></script>

    <script async defer src="https://buttons.github.io/buttons.js"></script>
</body>
</html>