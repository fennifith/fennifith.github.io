<!DOCTYPE html>

<html lang="en">
<head>
	<meta charset="utf-8">










<meta name="description" content="Writer of bad puns and slightly better software. This website contains information about my adventures in programming, current projects, and me.">
<meta name="author" content="James Fenn">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
<meta name="generator" content="James Fenn">
<title>Extending a Wedge</title>

<meta name="theme-color" content="#FFFFFF">
<meta name="mobile-web-app-capable" content="yes">
<link rel="manifest" href="/manifest.json">

<meta name="application-name" content="James Fenn">
<meta name="msapplication-TileColor" content="#FFFFFF">
<meta name="msapplication-tooltip" content="Writer of bad puns and slightly better software. This website contains information about my adventures in programming, current projects, and me.">
<meta name="msapplication-config" content="/ieconfig.xml">

<link rel="shortcut icon" href="/favicon.ico">
<link rel="icon" sizes="16x16" href="/favicon.ico">
<link rel="icon" sizes="24x24" href="/images/favicon-24.ico">
<link rel="icon" sizes="32x32" href="/images/favicon-32.ico">
<link rel="icon" sizes="48x48" href="/images/favicon-48.ico">
<link rel="icon" sizes="64x64" href="/images/favicon-64.ico">

<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="white">
<meta name="apple-mobile-web-app-title" content="James Fenn">
<link rel="apple-touch-icon-precomposed" href="/images/favicon-152.png">

<link href="https://fonts.googleapis.com/css?family=Miriam+Libre|Roboto|Vollkorn" rel="stylesheet">
<link href="//fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<link href="/css/styles.css" rel="stylesheet">


<meta name="twitter:card" content="summary">



<meta name="twitter:creator" content="@fennifith">
<meta name="twitter:site" content="@fennifith">

<meta name="twitter:title" content="Extending a Wedge">
<meta name="twitter:description" content="Writer of bad puns and slightly better software. This website contains information about my adventures in programming, current projects, and me.">
<meta name="twitter:image" content="https://jfenn.me/images/me.jpg">

<meta name="og:title" content="Extending a Wedge">

<meta name="og:type" content="website">

<meta name="og:image" content="https://jfenn.me/images/headers/snowytrees.jpg">
<meta name="og:url" content="https://jfenn.me/projects/attribouter/wiki/Extending-a-Wedge.html">
<meta name="og:description" content="Writer of bad puns and slightly better software. This website contains information about my adventures in programming, current projects, and me.">
<meta name="og:locale" content="en_US">
<meta name="og:site_name" content="James Fenn">



	<link href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.4.0/styles/atelier-cave-dark.min.css" rel="stylesheet">
<link href="/css/highlight.css" rel="stylesheet">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/highlight.min.js"></script>

<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/languages/kotlin.min.js"></script>

<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/languages/java.min.js"></script>

<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/languages/shell.min.js"></script>

<script>hljs.initHighlightingOnLoad();</script>

</head>
<body class="sidebar__container">
	<black-lives></black-lives><br>
<script src="https://unpkg.com/i-stand/black-lives.js" type="module"></script>


	<sidebar class="sidebar">
		
		<h2 id="tutorials">Tutorials</h2>

<ul>
  <li><a href="./The-Configuration-File">The Configuration File</a></li>
  <li><a href="./Overriding-Resources-and-Providing-Translations">Overriding Resources and Providing Translations</a></li>
  <li><a href="./Extending-a-Wedge">Extending A Wedge</a></li>
  <li><a href="./Custom-Themes">Custom Themes</a></li>
</ul>

<h2 id="docs">Docs</h2>

<ul>
  <li><a href="./AppWedge">AppWedge</a></li>
  <li><a href="./ContributorsWedge">ContributorsWedge</a>
    <ul>
      <li><a href="./ContributorWedge">ContributorWedge</a></li>
    </ul>
  </li>
  <li><a href="./LicensesWedge">LicensesWedge</a>
    <ul>
      <li><a href="./LicenseWedge">LicenseWedge</a></li>
    </ul>
  </li>
  <li><a href="./TranslatorsWedge">TranslatorsWedge</a>
    <ul>
      <li><a href="./TranslatorWedge">TranslatorWedge</a></li>
    </ul>
  </li>
  <li><a href="./TextWedge">TextWedge</a></li>
  <li><a href="./LinkWedge">LinkWedge</a>
    <ul>
      <li><a href="./LinkWedge#email">EmailLinkWedge</a></li>
      <li><a href="./LinkWedge#license">LicenseLinkWedge</a></li>
      <li><a href="./LinkWedge#play-store">PlayStoreLinkWedge</a></li>
    </ul>
  </li>
</ul>

<h2 id="automation">Automation</h2>

<ul>
  <li><a href="./Fetching-CrowdIn-Translations">Fetching CrowdIn Translations</a> by <a href="https://github.com/deletescape">@deletescape</a></li>
</ul>

	</sidebar>
	<main class="container">
		
		<a class="link" href="./">
			<img class="link__img" src="/images/ic/back.svg">
			<span class="link__title">Wiki Home</span>
		</a>
		
		<br>
		<h1>Extending a Wedge</h1>
		<div class="markdown">
			<p>Since the wedges used in the layout file are referenced by their corresponding class name, you may have guessed that it is possible to create your own wedge similarly to how one would create a custom view. You would be correct in that assumption. That said, because there are so many different use cases for this, I’m not going to provide a full “tutorial”, but rather explain the basics of how wedges can be created.</p>

<h2 id="creating-the-class">Creating the Class</h2>

<p>The absolute minimum requirements for a wedge class are that they must extend <code class="language-plaintext highlighter-rouge">me.jfenn.attribouter.wedges.Wedge</code> and have a public constructor that accepts an <code class="language-plaintext highlighter-rouge">android.content.res.XmlResourceParser</code>. However, there are several additional suggestions that can affect… things… if they are not followed:</p>

<ul>
  <li>Because wedges are added to a <code class="language-plaintext highlighter-rouge">RecyclerView</code>, they can have a subclass extending <code class="language-plaintext highlighter-rouge">me.jfenn.attribouter.wedges.Wedge$ViewHolder</code>, though this is not required. This class can be defined as a generic type of the <code class="language-plaintext highlighter-rouge">Wedge</code> class that your wedge class is extending, if that makes any sense (I don’t know what I’m saying, just look at the example below and you’ll see what I mean).</li>
  <li>Inside the constructor, you must call <code class="language-plaintext highlighter-rouge">super()</code> with the resource of the layout file that you want your wedge to use.</li>
  <li>You can then use the instance of <code class="language-plaintext highlighter-rouge">XmlResourceParser</code> to collect any XML arguments you want.</li>
  <li>After this, your constructor should end with a call to <code class="language-plaintext highlighter-rouge">addChildren(XmlResourceParser)</code>, which will parse and add any child wedges to a list that you can access (if your element has child wedges and there is not a call to this method in your constructor, it is very likely that you will encounter several issues as a result).</li>
</ul>

<p>Here is a basic example of what has been described so far:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyWedge</span> <span class="kd">extends</span> <span class="nc">Wedge</span><span class="o">&lt;</span><span class="nc">MyWedge</span><span class="o">.</span><span class="na">MyViewHolder</span><span class="o">&gt;</span> <span class="o">{</span>
  
  <span class="kd">public</span> <span class="nf">MyWedge</span><span class="o">(</span><span class="nc">XmlResourceParser</span> <span class="n">parser</span><span class="o">)</span> <span class="o">{</span>
    <span class="kd">super</span><span class="o">(</span><span class="no">R</span><span class="o">.</span><span class="na">layout</span><span class="o">.</span><span class="na">my_wedge_layout</span><span class="o">);</span>
    <span class="c1">//get attributes</span>
    <span class="n">addChildren</span><span class="o">(</span><span class="n">parser</span><span class="o">);</span>
  <span class="o">}</span>
  
  <span class="c1">//other methods</span>
  
  <span class="kd">public</span> <span class="kd">static</span> <span class="kd">class</span> <span class="nc">MyViewHolder</span> <span class="kd">extends</span> <span class="nc">ViewHolder</span> <span class="o">{</span>
  
    <span class="kd">public</span> <span class="nf">MyViewHolder</span><span class="o">(</span><span class="nc">View</span> <span class="n">v</span><span class="o">)</span> <span class="o">{</span>
      <span class="kd">super</span><span class="o">(</span><span class="n">v</span><span class="o">);</span>
    <span class="o">}</span>
  
  <span class="o">}</span>
  
<span class="o">}</span>
</code></pre></div></div>

<h2 id="implementing-methods">Implementing Methods</h2>

<p>There are also several abstract methods in <code class="language-plaintext highlighter-rouge">Wedge</code> that must be defined. Rather than explain all of them, I will simply implement them all in the above example along with comments explaining what should happen where.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyWedge</span> <span class="kd">extends</span> <span class="nc">Wedge</span><span class="o">&lt;</span><span class="nc">MyWedge</span><span class="o">.</span><span class="na">MyViewHolder</span><span class="o">&gt;</span> <span class="o">{</span>

  <span class="c1">//define information in your Wedge class</span>
  
  <span class="kd">public</span> <span class="nf">MyWedge</span><span class="o">(</span><span class="nc">XmlResourceParser</span> <span class="n">parser</span><span class="o">)</span> <span class="o">{</span>
    <span class="kd">super</span><span class="o">(</span><span class="no">R</span><span class="o">.</span><span class="na">layout</span><span class="o">.</span><span class="na">my_wedge_layout</span><span class="o">);</span>
    <span class="c1">//instantiate attributes</span>
    <span class="n">addChildren</span><span class="o">(</span><span class="n">parser</span><span class="o">);</span>
  <span class="o">}</span>
  
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="nc">MyViewHolder</span> <span class="nf">getViewHolder</span><span class="o">(</span><span class="nc">View</span> <span class="n">v</span><span class="o">)</span> <span class="o">{</span> <span class="c1">//"v" is the inflated layout file that you passed the resource of in your call to super()</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nf">MyViewHolder</span><span class="o">(</span><span class="n">v</span><span class="o">);</span> <span class="c1">//yep, that's all you really need</span>
  <span class="o">}</span>
  
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">bind</span><span class="o">(</span><span class="nc">Context</span> <span class="n">context</span><span class="o">,</span> <span class="nc">MyViewHolder</span> <span class="n">viewHolder</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">//here you bind the data in your wedge class to the views in the MyViewHolder instance</span>
  <span class="o">}</span>
  
  <span class="kd">public</span> <span class="kd">static</span> <span class="kd">class</span> <span class="nc">MyViewHolder</span> <span class="kd">extends</span> <span class="nc">ViewHolder</span> <span class="o">{</span>
  
    <span class="c1">//define views in your layout</span>
  
    <span class="kd">public</span> <span class="nf">MyViewHolder</span><span class="o">(</span><span class="nc">View</span> <span class="n">v</span><span class="o">)</span> <span class="o">{</span>
      <span class="kd">super</span><span class="o">(</span><span class="n">v</span><span class="o">);</span>
      <span class="c1">//instantiate views - "view = v.findViewById(...);"</span>
    <span class="o">}</span>
  
  <span class="o">}</span>
  
<span class="o">}</span>
</code></pre></div></div>

<h2 id="github-requests">GitHub Requests</h2>

<p>If you wish to make a request to the GitHub API from your wedge, simply call <code class="language-plaintext highlighter-rouge">addRequest(GitHubData)</code> with an instance of one of the <a href="https://jfenn.me/redirects/?t=github&amp;d=Attribouter/tree/91ff71a11338cc501c332b82ba8ddd6fa042bd24/attribouter/src/main/java/me/jfenn/attribouter/data/github">classes extending GitHubData</a>, or you can create your own. Thanks to <a href="https://github.com/google/gson">GSON</a>’s magic, this is ridiculously simple, and if you’ve gotten this far you can probably figure it out yourself just by looking at the source code.</p>

<p>After calling <code class="language-plaintext highlighter-rouge">addRequest()</code> with an instance of <code class="language-plaintext highlighter-rouge">GitHubData</code>, Attribouter will obtain and parse the data itself (as well as caching, combining duplicate requests, and other complicated things), and will pass it back to the <code class="language-plaintext highlighter-rouge">onInit(GitHubData)</code> method - which you should probably extend - of your wedge class, where you can modify any of your wedge’s data with the information you have obtained. Once <code class="language-plaintext highlighter-rouge">onInit</code> has been called, Attribouter will notify the RecyclerView of a change to your wedge, and you wedge’s <code class="language-plaintext highlighter-rouge">bind()</code> method will be called shortly afterwards.</p>

<p>As an example, here is a wedge based on the previous examples that initially displays my name in a TextView as “James Fern”, then makes a request to GitHub, correcting it to “James Fenn”:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyWedge</span> <span class="kd">extends</span> <span class="nc">Wedge</span><span class="o">&lt;</span><span class="nc">MyWedge</span><span class="o">.</span><span class="na">MyViewHolder</span><span class="o">&gt;</span> <span class="o">{</span>

  <span class="kd">private</span> <span class="nc">String</span> <span class="n">myName</span><span class="o">;</span>
  
  <span class="kd">public</span> <span class="nf">MyWedge</span><span class="o">(</span><span class="nc">XmlResourceParser</span> <span class="n">parser</span><span class="o">)</span> <span class="o">{</span>
    <span class="kd">super</span><span class="o">(</span><span class="no">R</span><span class="o">.</span><span class="na">layout</span><span class="o">.</span><span class="na">this_is_a_textview</span><span class="o">);</span>
    
    <span class="n">myName</span> <span class="o">=</span> <span class="s">"James Fern"</span><span class="o">;</span>
    <span class="n">addRequest</span><span class="o">(</span><span class="k">new</span> <span class="nc">UserData</span><span class="o">(</span><span class="s">"TheAndroidMaster"</span><span class="o">));</span>
    
    <span class="n">addChildren</span><span class="o">(</span><span class="n">parser</span><span class="o">);</span>
  <span class="o">}</span>
  
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="nc">MyViewHolder</span> <span class="nf">getViewHolder</span><span class="o">(</span><span class="nc">View</span> <span class="n">v</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nf">MyViewHolder</span><span class="o">(</span><span class="n">v</span><span class="o">);</span>
  <span class="o">}</span>
  
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">bind</span><span class="o">(</span><span class="nc">Context</span> <span class="n">context</span><span class="o">,</span> <span class="nc">MyViewHolder</span> <span class="n">viewHolder</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">viewHolder</span><span class="o">.</span><span class="na">textView</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="n">myName</span><span class="o">);</span>
  <span class="o">}</span>
  
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onInit</span><span class="o">(</span><span class="nc">GitHubData</span> <span class="n">data</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">data</span> <span class="k">instanceof</span> <span class="nc">UserData</span><span class="o">)</span> <span class="o">{</span>
      <span class="nc">UserData</span> <span class="n">user</span> <span class="o">=</span> <span class="o">(</span><span class="nc">UserData</span><span class="o">)</span> <span class="n">data</span><span class="o">;</span>
      <span class="n">myName</span> <span class="o">=</span> <span class="n">user</span><span class="o">.</span><span class="na">name</span><span class="o">;</span>
    <span class="o">}</span>
  <span class="o">}</span>
  
  <span class="kd">public</span> <span class="kd">static</span> <span class="kd">class</span> <span class="nc">MyViewHolder</span> <span class="kd">extends</span> <span class="nc">ViewHolder</span> <span class="o">{</span>
  
    <span class="nc">TextView</span> <span class="n">textView</span><span class="o">;</span>
  
    <span class="kd">public</span> <span class="nf">MyViewHolder</span><span class="o">(</span><span class="nc">View</span> <span class="n">v</span><span class="o">)</span> <span class="o">{</span>
      <span class="kd">super</span><span class="o">(</span><span class="n">v</span><span class="o">);</span>
      <span class="n">textView</span> <span class="o">=</span> <span class="o">(</span><span class="nc">TextView</span><span class="o">)</span> <span class="n">v</span><span class="o">;</span>
    <span class="o">}</span>
  
  <span class="o">}</span>
  
<span class="o">}</span>
</code></pre></div></div>

		</div>
	</main>

	<footer class="footer container" style="padding-bottom: 96px;">
	<hr>

	<div style="display: inline-block; float: right;">
		<input id="darkThemeCheckBox" type="checkbox">
		<label for="darkThemeCheckBox"></label>
		<span>Dark Theme</span>
	</div>
	<script type="text/javascript">
	    const _darkThemeCheckBoxElement = document.getElementById("darkThemeCheckBox");
	    const _darkThemeListeners = [];
	    var _darkTheme = false;
	    
	    function setDarkTheme(isDark) {
	        _darkTheme = isDark;
	        _darkThemeCheckBoxElement.checked = isDark;
			if (isDark) {
				document.body.classList.remove("--theme-light");
				document.body.classList.add("--theme-dark");
			} else {
				document.body.classList.remove("--theme-dark");
				document.body.classList.add("--theme-light");
			}
			
	        let color = isDark ? "#212121" : "#FFFFFF";
	        document.querySelector("meta[name='theme-color']").setAttribute("content", color);

			if (localStorage) {
				if (isDark)
					localStorage.setItem("darkTheme", ".");
				else localStorage.removeItem("darkTheme");
			}

			for (let i in _darkThemeListeners) {
			    _darkThemeListeners[i](isDark);
			}
	    }

	    function addDarkThemeListener(listener) {
	        _darkThemeListeners.push(listener);
	        listener(_darkTheme);
	    }
	    
		_darkThemeCheckBoxElement.addEventListener("change", function() {
			setDarkTheme(_darkThemeCheckBoxElement.checked);
		});

		setDarkTheme(localStorage && localStorage.getItem("darkTheme"));
	</script>
	
	<a class="footer__link" href="/redirects/?t=github&d=${}.github.io" target="_blank">Website Source Code</a>
	<br>
	<a class="footer__link" href="/policies/?web" target="_blank">Privacy Policy</a>
	<br>
	<a class="footer__link" href="/licenses" target="_blank">Open Source Licenses</a>
</footer>

<script src="//instant.page/3.0.0" type="module" defer integrity="sha384-OeDn4XE77tdHo8pGtE1apMPmAipjoxUQ++eeJa6EtJCfHlvijigWiJpD7VDPWXV1"></script>
</body>
</html>
	